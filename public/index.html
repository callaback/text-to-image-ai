<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Image Generator</title>
<style>
:root {
  --primary-color: #f6821f;
  --primary-hover: #ff9c4a;
  --bg-page: #0f172a;
  --bg-card: #1e293b;
  --border-color: #334155;
  --text-color: #f1f5f9;
  --text-muted: #94a3b8;
  --shadow-color: rgba(0,0,0,0.3);
  --input-bg: #1e293b;
  --button-bg: #f6821f;
  --button-hover: #ff9c4a;
}

[data-theme="light"] {
  --bg-page: #f9fafb;
  --bg-card: #ffffff;
  --border-color: #e5e7eb;
  --text-color: #1f2937;
  --text-muted: #6b7280;
  --input-bg: #ffffff;
  --button-bg: #f6821f;
  --button-hover: #e67e22;
}

* { box-sizing: border-box; margin:0; padding:0; transition: all 0.3s ease; }

body {
  font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;
  background: var(--bg-page);
  color: var(--text-color);
  display:flex;
  flex-direction:column;
  align-items:center;
  min-height:100vh;
  padding:1rem;
}

header {
  width:100%;
  max-width:600px;
  text-align:center;
  margin-bottom:1rem;
}

h1 { color: var(--primary-color); font-size:1.8rem; margin-bottom:0.25rem; }
p.subtitle { color: var(--text-muted); font-size:0.9rem; }

.theme-toggle {
  margin: 0.5rem 0;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:0.5rem;
}

.toggle-switch {
  position: relative;
  display:inline-block;
  width:50px; height:24px;
}

.toggle-switch input { opacity:0; width:0; height:0; }

.toggle-slider {
  position:absolute; top:0; left:0; right:0; bottom:0;
  background-color: var(--border-color);
  border-radius:12px;
  cursor:pointer;
  transition:0.4s;
}

.toggle-slider:before {
  content:"";
  position:absolute;
  height:18px; width:18px;
  left:3px; bottom:3px;
  background-color:var(--text-color);
  border-radius:50%;
  transition:0.4s;
}

input:checked + .toggle-slider { background-color:var(--primary-color); }
input:checked + .toggle-slider:before { transform:translateX(26px); }

.card {
  background: var(--bg-card);
  padding:1rem 1.25rem;
  border-radius:12px;
  box-shadow:0 4px 20px var(--shadow-color);
  width:100%;
  max-width:500px;
  display:flex;
  flex-direction:column;
  gap:0.75rem;
  margin-bottom:1rem;
}

.card input {
  padding:0.75rem 1rem;
  border-radius:8px;
  border:1px solid var(--border-color);
  font-size:1rem;
  background:var(--input-bg);
  color:var(--text-color);
  width:100%;
}

.card button {
  padding:0.75rem 1rem;
  border-radius:8px;
  border:none;
  background:var(--button-bg);
  color:white;
  font-weight:600;
  cursor:pointer;
  transition:0.2s;
}

.card button:hover { background: var(--button-hover); }
.card button:disabled { background:var(--text-muted); cursor:not-allowed; }

#image-preview {
  max-width:100%;
  border-radius:12px;
  box-shadow:0 4px 16px var(--shadow-color);
  margin-top:1rem;
}

footer {
  margin-top:auto;
  padding:1rem;
  text-align:center;
  font-size:0.85rem;
  color:var(--text-muted);
}
</style>
</head>
<body>

<header>
  <h1>AI Image Generator</h1>
  <p class="subtitle">@cf/stabilityai/stable-diffusion-xl-base-1.0</p>
  <div class="theme-toggle">
    <span>Light</span>
    <label class="toggle-switch">
      <input type="checkbox" id="theme-toggle">
      <span class="toggle-slider"></span>
    </label>
    <span>Dark</span>
  </div>
</header>

<div class="card">
  <input type="text" id="prompt" placeholder="Enter a prompt, e.g. 'cyberpunk cat'">
  <button id="generate-button">Generate Image</button>
</div>

<img id="image-preview" alt="Generated image will appear here">

<footer>
  &copy; 2026 callaback.com
</footer>

<script>
const themeToggle = document.getElementById('theme-toggle');
const body = document.body;
const savedTheme = localStorage.getItem('theme') || 'dark';
body.setAttribute('data-theme', savedTheme);
themeToggle.checked = savedTheme === 'dark';
themeToggle.addEventListener('change', () => {
  const theme = themeToggle.checked ? 'dark' : 'light';
  body.setAttribute('data-theme', theme);
  localStorage.setItem('theme', theme);
});

const promptInput = document.getElementById('prompt');
const button = document.getElementById('generate-button');
const image = document.getElementById('image-preview');

button.addEventListener('click', async () => {
  const prompt = promptInput.value.trim();
  if(!prompt) return;
  
  button.disabled = true;
  button.textContent = "Generating...";
  
  try {
    const resp = await fetch("/", {
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body: JSON.stringify({ prompt })
    });
    
    if(!resp.ok) throw new Error("Worker returned " + resp.status);
    
    const blob = await resp.blob();
    image.src = URL.createObjectURL(blob);
    
  } catch(e) {
    alert("Error: " + e.message);
  } finally {
    button.disabled = false;
    button.textContent = "Generate Image";
  }
});
</script>

</body>
</html>

